import{c as l,p as u,a as y}from"./middleware.ce65d969.js";function c(t,i,a,e){const{cart:n}=i(),o=n.items.find((i=>i.key===t.key));if(o){const i=e?t.quantity:t.quantity-o.quantity;o.quantity+=i,0===o.quantity&&(n.items=n.items.filter((i=>i.key!==t.key)))}else t.quantity>0&&n.items.unshift({...t});n.totalPrice=n.items.reduce(((t,i)=>t+i.price*i.quantity),0),a({cart:{...n}})}const f=l()(u(((t,i)=>({cart:{items:[],totalPrice:0},showModal:i=>t({isShowModal:i}),onAddToCart:(a,e,n)=>{c({key:`${a.id}-${n.size}-${n.color}`,name:a.name,thumbnail:a.thumbnail,price:a.price,slug:a.slug,originalPrice:a.originalPrice,option:n,quantity:e},i,t,!0)},onRemoveToCart:a=>{c({...a,quantity:0},i,t)},onUpdateQuantity:a=>{c(a,i,t)}})),{name:"cart",storage:y((()=>localStorage)),partialize:t=>({cart:{...t.cart}})}));export{f as u};
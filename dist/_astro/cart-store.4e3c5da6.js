import{c as l,p as u,a as y}from"./middleware.de8f5a9b.js";function c(a,n,t,o){const{cart:e}=n(),r=e.items.find(i=>i.key===a.key);if(r){const i=o?a.quantity:a.quantity-r.quantity;r.quantity+=i,r.quantity===0&&(e.items=e.items.filter(s=>s.key!==a.key))}else a.quantity>0&&e.items.unshift({...a});e.totalPrice=e.items.reduce((i,s)=>i+s.price*s.quantity,0),t({cart:{...e}})}const f=l()(u((a,n)=>({cart:{items:[],totalPrice:0},showModal:t=>a({isShowModal:t}),onAddToCart:(t,o,e)=>{const i={key:`${t.id}-${e.size}-${e.color}`,name:t.name,thumbnail:t.thumbnail,price:t.price,slug:t.slug,originalPrice:t.originalPrice,option:e,quantity:o};c(i,n,a,!0)},onRemoveToCart:t=>{c({...t,quantity:0},n,a)},onUpdateQuantity:t=>{c(t,n,a)}}),{name:"cart",storage:y(()=>localStorage),partialize:a=>({cart:{...a.cart}})}));export{f as u};

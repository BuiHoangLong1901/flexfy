import{r as n,j as o}from"./jsx-runtime.33c17f51.js";import{SelectBox as b}from"./SelectBox.508b9173.js";import{m as j}from"./motion.07eef3f2.js";var $=(t=>(t.INPUT="input",t.NUMBER="number",t.SELECT="select",t.PASSWORD="password",t))($||{});const g=(t,m)=>{t.target.classList.toggle("input-focus",m)},O=(t,m)=>{const{inputs:c,className:v,setValues:p}=t,[s,h]=n.useState({}),i=n.useRef(),E=()=>{if(!i.current)return;const e=Object.fromEntries(new FormData(i.current));let r={};return Object.entries(e).forEach(([a,l])=>{r={...r,...y(a,l)},h(r)}),Object.keys(r).length===0?e:null};n.useImperativeHandle(m,()=>({formValues:E,isValidate:Object.keys(s).length!==0}),[s]);const y=(e,r)=>{const a={...s},l=c.find(R=>R.name===e);if(!l)return;const{required:x,minLength:u,maxLength:d,pattern:f}=l;return x&&!r.trim()?a[e]=x.message:u?.value&&r.trim().length<u.value?a[e]=u.message:d?.value&&r.trim().length>d.value?a[e]=d.message:f?.value&&r.trim()&&!new RegExp(f.value).test(r.trim())?a[e]=f.message:delete a[e],h(a),a};return o.jsx("form",{autoComplete:"on",method:"post",ref:i,className:`${v} form-provider`,children:c.map((e,r)=>e.type==="select"&&e.data?o.jsxs(n.Fragment,{children:[o.jsx(b,{items:e.data,label:e.label,name:e.name,defaultValue:e.data[0]?.value,className:`${e.className} ${s[e.name]&&"input-error"}`,onChange:a=>p&&p({[e.name]:a})}),s[e.name]&&o.jsx(j.p,{className:"input-error-message",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5,delay:.05},children:s[e.name]})]},`FORM_ITEM_${e.name}_${r}`):o.jsxs("div",{className:e.className,children:[o.jsx("input",{name:e.name,value:e.value,type:e.type,placeholder:e.placeholder,autoComplete:s[e.label??""],className:`${s[e.name]&&"input-error"}`,onInput:a=>{g(a,!0),y(e.name,a.currentTarget.value)},onFocus:a=>g(a,!0),onBlur:a=>g(a,!1)}),s[e.name]&&o.jsx(j.p,{className:"input-error-message",initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:"collapsed",transition:{duration:.25,delay:.05},children:s[e.name]})]},`FORM_ITEM_${e.name}_${r}`))})},N=n.forwardRef(O);export{$ as F,N as a};
